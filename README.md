# vadpcmbin-To-SoHAudioSample
## A tool to convert the vadpcm.bin files, created by z64audio.exe/z64rom, to the audio sample format that SoH, the Ocarina of Time PC Port , utilizes.

* Step 1: Open your wav file in audacity (audio editing tool) and modify the sample rate value to be the same as the sample rate of the audio you want to replace then go to `Effect->Pitch and Tempo->Change Speed and Pitch` and modify the speed value until it sounds approximately normal again. Also, to check what's the sample rate of the audio you want to replace is, use [z64rom](https://github.com/z64tools/z64rom) and compile OoT MQ Debug rom with it and then navigate to z64rom's `rom\sound\sample\.vanilla\[Audio]\` folder. You'll see a WAV file of the original sound in there. Open it with audacity and then you can see its sample rate value. sample rate value of audio samples in the game that I checked out were either 16000 Hz or 20000 Hz, so if you are unable to get z64rom to work, choose between 16000 Hz or 20000 Hz.

* Step 2: Use [z64audio](https://github.com/z64tools/z64audio/releases/tag/2.2.0) or z64rom to convert your WAV file to vadpcm.bin. It should create two files which are a .vadpcm.bin file and a config.toml file. Both of these are important. You can ignore/delete the .book.bin file.

* Step 3: Use vadpcmToSample. When you first use the tool, it will open a pop-up screen and you need to select any SoH audio sample so the tool can acquire neccessary information. `(you can extract SoH audio samples using MPQ-Editor and opening oot.otr that SoH generates and navigating to audio/samples/ folder and extacting any of the files from there.)` After providing a SoH audio sample, the tool will create a `config.bruh` file in the same folder as the tool and will close itself. You shouldn't see that pop-up again when re-opening the tool.

* Step 4: Re-open vadpcmToSample and open the vadpcm.bin file (make sure the config.toml file is in the same folder as vadpcm.bin). The tool should automatically adjust the "loop start", "loop end", and "loop count" values to be same as the values that z64audio creates. The problem though is that z64audio doesn't seem to make `loop_end` value in config.toml be long enough so the whole audio plays in-game. Because of that, you should probably consider adding somewhere between an extra 1000 to 3000 to the "loop end" value when using the tool, to make sure the entire audio plays in-game. Don't increase the "loop end" value too much because it might add noises if it exceeds how long it needs to be for the audio to play fully in-game.

* Step 5: make a folder somewhere in your PC (for example, a folder called "myaudio") and then make a folder inside it and name it "audio" and make a folder inside "audio" folder called "samples". Then place your custom audio sample in the "samples" folder and rename it to the name of the audio sample you want to replace. Finally, using [retro](https://github.com/HarbourMasters64/retro), navigate to "Create OTR" -> "Custom" -> "Select Directory" and select the "myaudio" folder, then select "Stage Files" -> "Finalize OTR" -> "generate OTR" and place the otr file in the "mods" folder in soh. If you don't know the name of the audio sample you want to replace, use mpq-editor (google it) and open your oot.otr (or oot-mq.otr) and navigate to `audio/samples/` folder. There, you can see the names of all the audio samples for SoH.

## Note(s):
* The audio will very likely sound kinda glitchy even after adjusting the sample rate and Hz value in audacity. At the moment i'm writing this, i still don't know what's the fix for this. The glitchy effects can be considered by some as somewhat minor though.

* In-game, when Link finishes doing a certain action, the audio of that action will also probably stop regardless if you increased the `loop end` value or not. One example of this is the scream audio that plays when Link falls off a high area. Once Link lands on a ground, the audio cuts off because Link no longer is falling. If you want to hear the entire audio play in-game without cutting, you could take advantage of the F1 menu in SoH that has several cheats like moon jump (so link doesn't land on the ground and you can hear the full scream for example) or you can navigate to `Enhancements->Audio Editor` and find the audio there and press the play button to listen to it. 
